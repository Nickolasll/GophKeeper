@startuml
!theme vibrant
title: 8.1 Диаграмма классов сервера

namespace server {
    namespace application {
        namespace services {}
    }

    namespace domain {
        namespace entities {}
        namespace repositories {}
    }
}


class server.domain.entities.User {
    + ID : UUID
    + Login : String
    + Password : String
}

class server.domain.entities.Credentials {
    + ID : UUID
    + UserID : UUID
    + Name : String
    + Login : String
    + Password : String
}

class server.domain.entities.Text {
    + ID : UUID
    + UserID: UUID
    + Name : String
    + Text : String
}

class server.domain.entities.Binary {
    + ID : UUID
    + UserID: UUID
    + Name : String
    + Data : String
}

class server.domain.entities.BankCard {
    + ID : UUID
    + UserID: UUID
    + Name : String
    + Number : String
    + ExpirationDate: DateTime
    + CardHolder: String
    + CVV: String
}

class server.domain.repositories.UserRepositoryInterface {
    + void Create(login : String, password : String) : null
    + void GetByLogin(login: String) : User | null
}

class server.domain.repositories.CredentialsRepositoryInterface {
    + void Save(object : Credentials) : null
    + void Get(ID: UUID) : Credentials | null
    + void FindByUserID(UserID: UUID) : List[Credentials]
}

class server.domain.repositories.TextRepositoryInterface {
    + void Save(object : Text) : null
    + void Get(ID: UUID) : Text | null
    + void FindByUserID(UserID: UUID) : List[Text]
}

class server.domain.repositories.BinaryRepositoryInterface {
    + void Save(object : Binary) : null
    + void Get(ID: UUID) : Binary | null
    + void FindByUserID(UserID: UUID) : List[Binary]
}

class server.domain.repositories.BankCardRepositoryInterface {
    + void Save(object : BankCard) : null
    + void Get(ID: UUID) : BankCard | null
    + void FindByUserID(UserID: UUID) : List[BankCard]
}


class server.application.services.JOSEService {
    + JWK
    + void IssueToken(userId : UUID) : String
    + void ParseUserID(token: String) : String
    + void Hash(password: String) : String
    + void VerifyPassword(hashedPassword: String, currPassword: String) : Bool
}

class server.application.services.CryptoService {
    + PrivateKey : String
    + void Encode(Data : String) : String
    + void Dencode(Data : String) : String
}


server.domain.entities.User "1" <-- "*" server.domain.entities.Credentials
server.domain.entities.User "1" <-- "*" server.domain.entities.Text
server.domain.entities.User "1" <-- "*" server.domain.entities.Binary
server.domain.entities.User "1" <-- "*" server.domain.entities.BankCard

@enduml